<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Learning Site Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .tab-button {
            transition: color 0.2s, border-color 0.2s;
            border-bottom: 2px solid transparent;
        }
        .tab-button.active {
            color: #4f46e5; /* indigo-600 */
            border-color: #4f46e5; /* indigo-600 */
        }
        .form-section {
            display: none;
        }
        .form-section.active {
            display: block;
        }
        .help-text {
            font-size: 0.75rem;
            color: #6b7280;
            white-space: pre-line;
            margin-top: 4px;
        }
         input[type="color"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 2.75rem; /* w-11 */
            height: 2.5rem; /* h-10 */
            padding: 0;
            border: none;
            border-radius: 0 0.5rem 0.5rem 0; /* rounded-r-lg */
            cursor: pointer;
        }
        input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        input[type="color"]::-webkit-color-swatch {
            border: none;
            border-radius: 0 0.5rem 0.5rem 0;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-100 via-purple-50 to-pink-100">

    <div class="max-w-4xl mx-auto bg-white shadow-2xl rounded-xl overflow-hidden my-8">
        <header class="bg-gradient-to-r from-indigo-600 to-purple-600 p-6 sm:p-8 text-white">
            <h1 class="text-3xl sm:text-4xl font-bold text-center">G√©n√©rateur de Site d'Apprentissage de Langues</h1>
            <p class="text-center text-indigo-200 mt-2">Cr√©ez vos propres sites d'apprentissage facilement!</p>
        </header>

        <nav class="flex border-b bg-gray-50 overflow-x-auto">
            <button onclick="showTab('general')" class="tab-button active flex-shrink-0 py-3 px-4 sm:px-6 font-medium text-sm sm:text-base focus:outline-none" data-tab="general">G√©n√©ral</button>
            <button onclick="showTab('index')" class="tab-button flex-shrink-0 py-3 px-4 sm:px-6 font-medium text-sm sm:text-base focus:outline-none" data-tab="index">Index</button>
            <button onclick="showTab('alphabet')" class="tab-button flex-shrink-0 py-3 px-4 sm:px-6 font-medium text-sm sm:text-base focus:outline-none" data-tab="alphabet">Alphabet</button>
            <button onclick="showTab('vocabulary')" class="tab-button flex-shrink-0 py-3 px-4 sm:px-6 font-medium text-sm sm:text-base focus:outline-none" data-tab="vocabulary">Vocabulaire</button>
            <button onclick="showTab('course')" class="tab-button flex-shrink-0 py-3 px-4 sm:px-6 font-medium text-sm sm:text-base focus:outline-none" data-tab="course">Cours 21 Jours</button>
        </nav>

        <main class="p-6 sm:p-8">
            <!-- General Settings -->
            <div id="general-section" class="form-section active">
                <div class="mb-8 p-6 bg-white shadow-lg rounded-lg border border-gray-200">
                    <h2 class="text-2xl font-semibold text-indigo-700 mb-6 border-b pb-2">Param√®tres G√©n√©raux</h2>
                    
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="languageName">Nom du Site (e.g., "Apprendre l'Espagnol")</label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="languageName" type="text" value="Apprendre le Russe">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="targetLanguage">Langue Cible (e.g., "Espagnol")</label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="targetLanguage" type="text" value="Russe">
                    </div>
                     <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="nativeLanguage">Langue Native (e.g., "Fran√ßais")</label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="nativeLanguage" type="text" value="Fran√ßais">
                    </div>

                    <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-2">Couleurs du drapeau (style en-t√™te)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div><label class="block text-gray-700 text-sm font-bold mb-1" for="flagColor1">Couleur 1</label><div class="flex items-center"><input class="shadow-sm border rounded-l w-full py-2 px-3 text-gray-700" id="flagColor1" type="text" value="#FFFFFF"><input type="color" oninput="this.previousElementSibling.value = this.value" value="#FFFFFF"></div></div>
                        <div><label class="block text-gray-700 text-sm font-bold mb-1" for="flagColor2">Couleur 2</label><div class="flex items-center"><input class="shadow-sm border rounded-l w-full py-2 px-3 text-gray-700" id="flagColor2" type="text" value="#0039A6"><input type="color" oninput="this.previousElementSibling.value = this.value" value="#0039A6"></div></div>
                        <div><label class="block text-gray-700 text-sm font-bold mb-1" for="flagColor3">Couleur 3</label><div class="flex items-center"><input class="shadow-sm border rounded-l w-full py-2 px-3 text-gray-700" id="flagColor3" type="text" value="#D52B1E"><input type="color" oninput="this.previousElementSibling.value = this.value" value="#D52B1E"></div></div>
                    </div>
                </div>
            </div>

            <!-- Index Settings -->
            <div id="index-section" class="form-section">
                 <div class="mb-8 p-6 bg-white shadow-lg rounded-lg border border-gray-200">
                    <h2 class="text-2xl font-semibold text-indigo-700 mb-6 border-b pb-2">Page d'Accueil (index.html)</h2>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="introTitle">Titre Introduction</label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="introTitle" type="text" value="Bienvenue dans votre aventure russe !">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="introParagraph">Paragraphe Introduction</label>
                        <textarea class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="introParagraph" rows="3">D√©couvrez la richesse de la langue russe √† travers notre m√©thode progressive et interactive. De l'alphabet cyrillique aux conversations courantes, nous vous accompagnons √† chaque √©tape de votre apprentissage.</textarea>
                    </div>

                    <div class="mb-4 mt-6">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="programOverviewData">Aper√ßu du Programme (pour l'accord√©on)</label>
                        <textarea class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 font-mono text-sm" id="programOverviewData" rows="15">WEEK:Semaine 1 : Les Fondamentaux
Jour 1 : Introduction √† l'alphabet cyrillique (partie 1);D√©couverte des 10 premi√®res lettres
Jour 2 : Introduction √† l'alphabet cyrillique (partie 2);Apprentissage des lettres suivantes
Jour 3 : Finalisation de l'alphabet cyrillique;Les derni√®res lettres
Jour 4 : Salutations et pr√©sentations;Expressions de base pour se saluer
Jour 5 : Expressions courantes et politesse;Formules de politesse utiles
Jour 6 : Les nombres de 1 √† 20;Apprendre √† compter
Jour 7 : R√©vision et pratique;Consolidation des acquis
__WEEK_SEPARATOR__
WEEK:Semaine 2 : Structures de Base
Jour 8 : Pronoms personnels et verbe "√™tre";Ma√Ætriser les pronoms
Jour 9 : Premier groupe de verbes au pr√©sent;Conjugaison des verbes en -–∞—Ç—å/-—è—Ç—å
Jour 10 : Second groupe de verbes au pr√©sent;Conjugaison des verbes en -–∏—Ç—å
Jour 11 : Questions et r√©ponses de base;Apprendre √† poser des questions
Jour 12 : Les adjectifs de base;Adjectifs courants et leur accord
Jour 13 : Les adverbes et expressions de temps;Adverbes et jours de la semaine
Jour 14 : R√©vision et consolidation;Consolider les acquis
__WEEK_SEPARATOR__
WEEK:Semaine 3 : Communication √âlargie
Jour 15 : Exprimer ses go√ªts et pr√©f√©rences;Dire ce qu'on aime
Jour 16 : La nourriture et le restaurant;Vocabulaire du restaurant
Jour 17 : Shopping et achats;Expressions pour faire des achats
Jour 18 : Orientation et directions;Demander et donner des directions
Jour 19 : Parler de la m√©t√©o et des saisons;D√©crire le temps qu'il fait
Jour 20 : T√©l√©phone et communication;Expressions t√©l√©phoniques
Jour 21 : R√©vision g√©n√©rale et bilan;Consolider tous les acquis</textarea>
                        <p class="help-text">Commencez une semaine avec "WEEK:Titre de la semaine".
S√©parez les semaines avec "__WEEK_SEPARATOR__".
Pour chaque jour : Titre du jour;Description du jour</p>
                    </div>
                     <div class="mb-4 mt-6">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="resourcesData">Ressources Compl√©mentaires</label>
                        <textarea class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 font-mono text-sm" id="resourcesData" rows="5">APPS:Anki, Russian Alphabet Mastery, Tandem, Morpheem
BOOKS:Grammaire russe pour d√©butants, Histoire de la langue russe
WEBSITES:RussianPod101, Russie.fr, Wiktionary</textarea>
                        <p class="help-text">Format: TYPE:Item 1, Item 2, Item 3
Types valides: APPS, BOOKS, WEBSITES. Chaque type sur une nouvelle ligne.</p>
                    </div>

                    <button onclick="generateIndexHTML()" class="mt-6 w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200">
                        G√©n√©rer index.html
                    </button>
                </div>
            </div>

            <!-- Alphabet Settings -->
            <div id="alphabet-section" class="form-section">
                 <div class="mb-8 p-6 bg-white shadow-lg rounded-lg border border-gray-200">
                    <h2 class="text-2xl font-semibold text-indigo-700 mb-6 border-b pb-2">Page Alphabet</h2>
                     <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="alphabetPageTitle">Titre Page Alphabet</label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="alphabetPageTitle" type="text" value="L'Alphabet Russe">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="alphabetPageSubtitle">Sous-titre Page</label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="alphabetPageSubtitle" type="text" value="Un guide simple pour apprendre le cyrillique">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="lettersData">Donn√©es des Lettres</label>
                        <textarea class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 font-mono text-sm" id="lettersData" rows="15">–ê;–∞;[a];comme dans "papa";Identique;–∞–Ω–∞–Ω–∞—Å,[ananas],ananas|–∞–≤—Ç–æ–±—É—Å,[aftabus],bus
–ö;–∫;[k];comme dans "k√©pi";Identique;–∫–æ—Ç,[kot],chat|–∫–æ—Ñ–µ,[kofi√©],caf√©
–ú;–º;[m];comme dans "maman";Identique;–º–∞–º–∞,[mama],maman|–º–µ—Ç—Ä–æ,[mitra],m√©tro
–û;–æ;[o];comme dans "mot";Identique;–æ–∫–Ω–æ,[akno],fen√™tre|–¥–æ–º,[dom],maison
–¢;—Ç;[t];comme dans "ton";Identique;—Ç–∞–º,[tam],l√†-bas|—Å—Ç–æ–ª,[stol],table
–í;–≤;[v];comme dans "vous";Pi√®ge;–≤–æ–¥–∞,[vada],eau|–≤–æ—Ç,[vot],voici
–ù;–Ω;[n];comme dans "non";Pi√®ge;–Ω–æ—Å,[nos],nez|–Ω–æ—á—å,[notch],nuit
–†;—Ä;[r];roul√©;Pi√®ge;—Ä—É–∫–∞,[rouka],main|—Ä—ã–±–∞,[ryba],poisson
–°;—Å;[s];comme dans "savoir";Pi√®ge;—Å–æ–∫,[sok],jus|—Å—É–ø,[soup],soupe
–£;—É;[ou];comme dans "loup";Pi√®ge;—É—Ç—Ä–æ,[outra],matin|—É—Ö–æ,[oukha],oreille
–•;—Ö;[kh];jota espagnole;Pi√®ge;—Ö–ª–µ–±,[khli√®b],pain|—Ö–æ—Ä–æ—à–æ,[kharacho],bien
–ë;–±;[b];comme dans "bon";Unique;–±—Ä–∞—Ç,[brat],fr√®re|–±–∞–Ω–∞–Ω,[banan],banane</textarea>
                        <p class="help-text">Format par ligne : Maj;min;[prononciation];comme "exemple";Type;mot1,[pron1],trad1|mot2,[pron2],trad2
Types: Identique, Pi√®ge, Unique. Les exemples de mots sont optionnels.</p>
                    </div>
                    <button onclick="generateAlphabetHTML()" class="mt-6 w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200">
                        G√©n√©rer alphabet.html
                    </button>
                </div>
            </div>

            <!-- Vocabulary Settings -->
            <div id="vocabulary-section" class="form-section">
                <div class="mb-8 p-6 bg-white shadow-lg rounded-lg border border-gray-200">
                    <h2 class="text-2xl font-semibold text-indigo-700 mb-6 border-b pb-2">Page Vocabulaire</h2>
                     <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="vocabPageTitle">Titre Page Vocabulaire</label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="vocabPageTitle" type="text" value="Vocabulaire Russe">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="vocabCategories">Cat√©gories</label>
                        <textarea class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 font-mono text-sm" id="vocabCategories" rows="5">basics,Bases
greetings,Salutations
numbers,Nombres
food,Nourriture
travel,Voyage</textarea>
                        <p class="help-text">Format par ligne : id,NomAffich√©</p>
                    </div>
                     <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="wordsData">Mots de Vocabulaire</label>
                        <textarea class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 font-mono text-sm" id="wordsData" rows="15">–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ;[zdravstvouyti√©];bonjour (formel);greetings
–¥–æ —Å–≤–∏–¥–∞–Ω–∏—è;[da svidaniya];au revoir;greetings
–¥–∞;[da];oui;basics
–Ω–µ—Ç;[niet];non;basics
–º–∏—Ä;[mir];monde / paix;basics;Peut signifier 'monde' (l'univers) ou 'paix'.
—è–∑—ã–∫;[yazyk];langue / langue (organe);basics;Peut signifier 'langue' (pour parler) ou 'langue' (l'organe).
–≤–æ–¥–∞;[vada];eau;food
—Ö–ª–µ–±;[khli√®b];pain;food
–æ–¥–∏–Ω;[adin];un;numbers</textarea>
                        <p class="help-text">Format par ligne : MotCible;[prononciation];Traduction;cat√©gorie1,cat√©gorie2;Nuance (optionnel)</p>
                    </div>
                    <button onclick="generateVocabularyHTML()" class="mt-6 w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200">
                        G√©n√©rer vocabulaire.html
                    </button>
                </div>
            </div>

            <!-- Course Settings -->
            <div id="course-section" class="form-section">
                 <div class="mb-8 p-6 bg-white shadow-lg rounded-lg border border-gray-200">
                    <h2 class="text-2xl font-semibold text-indigo-700 mb-6 border-b pb-2">Page Cours 21 Jours</h2>
                     <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="coursePageTitle">Titre Page Cours</label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" id="coursePageTitle" type="text" value="Cours de Russe en 21 Jours">
                    </div>
                     <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="daysData">Donn√©es des Jours</label>
                        <textarea class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 font-mono text-sm" id="daysData" rows="20">1;D√©couverte de l'Alphabet (Partie 1);Se familiariser avec les dix premi√®res lettres.
TEXT_SECTION:Introduction|Bienvenue au premier jour !
LETTER_GRID:Les 10 premi√®res lettres|–ê,–∞,[a],papa|–ë,–±,[b],bon|–í,–≤,[v],vous
VOCAB_LIST:Vocabulaire de base|–¥–∞,[da],oui|–Ω–µ—Ç,[niet],non
EXERCISE:Exercice d'√©criture|Tracez chaque lettre 10 fois.
FOCUS_BOX:Focus Culturel: Origine de l'alphabet|L'alphabet cyrillique tire son nom de Saint Cyrille...
__DAY_SEPARATOR__
2;D√©couverte de l'Alphabet (Partie 2);Apprendre les dix lettres suivantes.
TEXT_SECTION:R√©vision|Revoyons les lettres d'hier.
LETTER_GRID:Les 10 lettres suivantes|–ì,–≥,[g],gare|–î,–¥,[d],dans
VOCAB_LIST:Objets courants|–¥–æ–º,[dom],maison|—Å—Ç–æ–ª,[stol],table
EXERCISE:Association|Reliez les sons aux lettres.
FOCUS_BOX:Phon√©tique: L'akanie|Lorsque "–æ" n'est pas accentu√©e, elle se prononce [a]...
__DAY_SEPARATOR__
7;R√©vision Semaine 1;Consolider les acquis.
TEXT_SECTION:R√©capitulatif|Nous avons couvert l'alphabet et les salutations.
RECAP_LIST:Acquis de la semaine|Alphabet complet|Salutations de base|Nombres 1-10
EXERCISE:Quiz rapide|Testez vos connaissances de la semaine.
FOCUS_BOX:Conseils d'√©tude|Pratiquez 15 minutes chaque jour.
__DAY_SEPARATOR__
21;R√©vision G√©n√©rale et Bilan;Consolider tous les acquis des trois semaines.
TEXT_SECTION:F√©licitations!|Vous avez termin√© le programme de base!
RECAP_LIST:Comp√©tences acquises|Compr√©hension orale de base|Expression orale simple|Lecture de textes courts
EXERCISE:Auto-√©valuation|√âvaluez vos progr√®s et identifiez les points √† renforcer.
FOCUS_BOX:Prochaines √©tapes|Continuez votre apprentissage avec des ressources interm√©diaires.</textarea>
                        <p class="help-text">S√©parez chaque jour par "__DAY_SEPARATOR__".
Format Jour: Num√©ro;Titre;Objectif
Format Section: TYPE:Titre(optionnel)|Contenu/Donn√©es
Types: TEXT_SECTION, LETTER_GRID, VOCAB_LIST, NOTE_BOX, FOCUS_BOX, EXERCISE, DIALOGUE, RECAP_LIST
Exemple DIALOGUE: DIALOGUE:Au restaurant|Client:Je voudrais...,Serveur:Voici...</p>
                    </div>
                    <button onclick="generateCourseHTML()" class="mt-6 w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200">
                        G√©n√©rer cours-21-jours.html
                    </button>
                </div>
            </div>
        </main>
        <footer class="p-6 bg-gray-50 border-t text-center">
            <p class="text-sm text-gray-500">Language Learning Site Generator - Gemini 2024</p>
        </footer>
    </div>

<script>
    // --- UTILITY FUNCTIONS ---
    function showTab(tabName) {
        document.querySelectorAll('.form-section').forEach(section => section.classList.remove('active'));
        document.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active'));
        document.getElementById(`${tabName}-section`).classList.add('active');
        document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
    }

    function escapeHtml(unsafe) {
        if (unsafe === null || unsafe === undefined) return '';
        return unsafe.toString()
             .replace(/&/g, "&amp;")
             .replace(/</g, "&lt;")
             .replace(/>/g, "&gt;")
             .replace(/"/g, "&quot;")
             .replace(/'/g, "&#039;");
    }

    function downloadFile(filename, content) {
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/html;charset=utf-8,' + encodeURIComponent(content));
      element.setAttribute('download', filename);
      document.body.appendChild(element);
      element.click();
      document.body.removeChild(element);
    }

    // --- TEMPLATE GENERATION LOGIC ---

    function getGeneralSettings() {
        return {
            languageName: document.getElementById('languageName').value,
            targetLanguage: document.getElementById('targetLanguage').value,
            nativeLanguage: document.getElementById('nativeLanguage').value,
            flagColor1: document.getElementById('flagColor1').value,
            flagColor2: document.getElementById('flagColor2').value,
            flagColor3: document.getElementById('flagColor3').value,
            themePrimary: '#1e3a8a',
            themeSecondary: '#c53030',
            themeAccent: '#5a67d8',
            themeRusse: '#c53030', 
            themeFrancais: '#3182ce',
            themeBackground: '#f0f5ff',
            themeCardBg: '#ffffff',
            themeLight: '#f7fafc',
            themeDark: '#2d3748'
        };
    }

    function generateIndexHTML() {
        const generalSettings = getGeneralSettings();
        const introTitle = document.getElementById('introTitle').value;
        const introParagraph = document.getElementById('introParagraph').value;
        const programData = document.getElementById('programOverviewData').value;
        const resourcesData = document.getElementById('resourcesData').value;

        // Build Program Overview Accordion HTML
        let programAccordionHTML = '';
        const weeks = programData.split('__WEEK_SEPARATOR__');
        weeks.forEach((weekData, index) => {
            const lines = weekData.trim().split('\n');
            const weekTitleLine = lines.shift() || '';
            const weekTitle = weekTitleLine.replace('WEEK:', '').trim();
            const weekId = `week${index + 1}`;

            let daysHTML = '';
            lines.forEach(line => {
                const [dayTitle, dayDesc] = line.split(';');
                if (dayTitle && dayDesc) {
                    daysHTML += `
                        <div class="day-item">
                            <div class="day-title">${escapeHtml(dayTitle)}</div>
                            <div class="day-description">${escapeHtml(dayDesc)}</div>
                        </div>`;
                }
            });

            programAccordionHTML += `
                <div class="week-section">
                    <div class="week-header" onclick="toggleWeek('${weekId}')">
                        <h3>${escapeHtml(weekTitle)}</h3>
                        <span>‚ñº</span>
                    </div>
                    <div class="week-content" id="${weekId}">
                        ${daysHTML}
                    </div>
                </div>`;
        });
        
        // Build Resources HTML
        let resourcesHTML = '';
        const resourceLines = resourcesData.trim().split('\n');
        const resourcesMap = {
            APPS: { icon: 'üì±', title: 'Applications Recommand√©es', items: '' },
            BOOKS: { icon: 'üìñ', title: 'Livres et Manuels', items: '' },
            WEBSITES: { icon: 'üåê', title: 'Sites Web', items: '' }
        };

        resourceLines.forEach(line => {
            const [type, itemsStr] = line.split(':');
            if (type && itemsStr && resourcesMap[type.toUpperCase()]) {
                resourcesMap[type.toUpperCase()].items = itemsStr;
            }
        });

        Object.values(resourcesMap).forEach(resource => {
            if (resource.items) {
                resourcesHTML += `
                    <div class="feature-card">
                        <div class="feature-icon">${resource.icon}</div>
                        <h3>${escapeHtml(resource.title)}</h3>
                        <p>${escapeHtml(resource.items)}</p>
                    </div>`;
            }
        });


        const html = \`
<!DOCTYPE html>
<html lang="\${escapeHtml(generalSettings.nativeLanguage.slice(0, 2).toLowerCase())}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>\${escapeHtml(generalSettings.languageName)} - Guide Complet</title>
    <style>
        :root {
            --primary: \${escapeHtml(generalSettings.themePrimary)};
            --secondary: \${escapeHtml(generalSettings.themeSecondary)};
            --accent: \${escapeHtml(generalSettings.themeAccent)};
            --light: \${escapeHtml(generalSettings.themeLight)};
            --dark: \${escapeHtml(generalSettings.themeDark)};
            --background: \${escapeHtml(generalSettings.themeBackground)};
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: var(--dark); background: var(--background); }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        header { background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; padding: 30px 0; text-align: center; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
        header h1 { font-size: 2.5rem; margin-bottom: 15px; }
        .flag-colors { display: flex; height: 10px; margin: 20px auto 0; width: 200px; border-radius: 5px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .flag-color-1 { background: \${escapeHtml(generalSettings.flagColor1)}; flex: 1; }
        .flag-color-2 { background: \${escapeHtml(generalSettings.flagColor2)}; flex: 1; }
        .flag-color-3 { background: \${escapeHtml(generalSettings.flagColor3)}; flex: 1; }
        .navigation { background: white; padding: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 30px; }
        .nav-buttons { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .nav-btn { background: var(--primary); color: white; padding: 12px 24px; text-decoration: none; border-radius: 8px; font-weight: 500; transition: all 0.3s ease; }
        .nav-btn:hover { background: var(--accent); transform: translateY(-2px); }
        .nav-btn.active { background: var(--secondary); }
        .main-content { background: white; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); padding: 30px; margin-bottom: 30px; }
        .intro-section h2, .program-overview h2, #ressources h2 { color: var(--primary); font-size: 2rem; text-align:center; margin-bottom: 20px; }
        .intro-section p { font-size: 1.1rem; max-width: 800px; margin: 0 auto 30px; text-align:center; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; margin-top: 40px; }
        .feature-card { background: var(--light); padding: 30px; border-radius: 10px; text-align: center; transition: transform 0.3s ease; }
        .feature-card:hover { transform: translateY(-5px); }
        .feature-icon { font-size: 3rem; margin-bottom: 20px; }
        .feature-card h3 { color: var(--primary); margin-bottom: 15px; }
        .week-section { background: white; border: 1px solid #e2e8f0; border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
        .week-header { background: var(--primary); color: white; padding: 15px 25px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .week-content { padding: 20px 25px; display: none; }
        .week-content.active { display: block; }
        .day-item { padding: 15px; border-bottom: 1px solid #e2e8f0; } .day-item:last-child { border-bottom: none; }
        .day-title { font-weight: 600; color: var(--primary); }
        footer { background: var(--primary); color: white; text-align: center; padding: 30px 0; margin-top: 50px; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>\${escapeHtml(generalSettings.languageName)}</h1>
            <p>Votre guide complet pour ma√Ætriser la langue \${escapeHtml(generalSettings.targetLanguage.toLowerCase())}</p>
            <div class="flag-colors"><div class="flag-color-1"></div><div class="flag-color-2"></div><div class="flag-color-3"></div></div>
        </div>
    </header>
    <nav class="navigation">
        <div class="container">
            <div class="nav-buttons">
                <a href="index.html" class="nav-btn active">üè† Accueil</a>
                <a href="alphabet.html" class="nav-btn">üî§ Alphabet</a>
                <a href="vocabulaire.html" class="nav-btn">üìö Vocabulaire</a>
                <a href="cours-21-jours.html" class="nav-btn">üìÖ Programme 21 jours</a>
            </div>
        </div>
    </nav>
    <main class="container">
        <div class="main-content">
            <section class="intro-section">
                <h2>\${escapeHtml(introTitle)}</h2>
                <p>\${escapeHtml(introParagraph)}</p>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üî§</div><h3>Alphabet</h3><p>Ma√Ætrisez l'alphabet avec notre guide interactif.</p><a href="alphabet.html" class="nav-btn" style="margin-top:15px; display:inline-block;">Commencer</a>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üìö</div><h3>Vocabulaire Essentiel</h3><p>Mots class√©s par th√®me avec prononciation et traduction.</p><a href="vocabulaire.html" class="nav-btn" style="margin-top:15px; display:inline-block;">Explorer</a>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üìÖ</div><h3>Programme 21 Jours</h3><p>Un parcours structur√© pour acqu√©rir les bases en trois semaines.</p><a href="cours-21-jours.html" class="nav-btn" style="margin-top:15px; display:inline-block;">D√©couvrir</a>
                    </div>
                </div>
            </section>
             <section class="program-overview" style="margin-top:50px;">
                <h2>Aper√ßu du Programme d'Apprentissage en 21 Jours</h2>
                \${programAccordionHTML}
                 <div style="text-align: center; margin-top: 30px;">
                    <a href="cours-21-jours.html" class="nav-btn" style="background-color: var(--secondary);">Acc√©der au Programme Complet</a>
                </div>
            </section>
            <section id="ressources" style="margin-top: 50px;">
                <h2>Ressources Compl√©mentaires</h2>
                <div class="features-grid">\${resourcesHTML}</div>
            </section>
        </div>
    </main>
    <footer><p>&copy; \${new Date().getFullYear()} \${escapeHtml(generalSettings.languageName)}</p></footer>
    <script>
        function toggleWeek(weekId) {
            const content = document.getElementById(weekId);
            if (!content) return;
            const header = content.previousElementSibling;
            const arrow = header.querySelector('span');
            const isActive = content.classList.contains('active');
            
            document.querySelectorAll('.week-content.active').forEach(openContent => {
                openContent.classList.remove('active');
                openContent.previousElementSibling.querySelector('span').textContent = '‚ñº';
            });

            if (!isActive) {
                content.classList.add('active');
                arrow.textContent = '‚ñ≤';
            }
        }
    </script>
</body>
</html>\`;
        downloadFile('index.html', html);
    }
    
    function generateAlphabetHTML() {
        const generalSettings = getGeneralSettings();
        const pageTitle = document.getElementById('alphabetPageTitle').value;
        const pageSubtitle = document.getElementById('alphabetPageSubtitle').value;
        const lettersData = document.getElementById('lettersData').value;

        let lettersHTML = '';
        const letterRows = lettersData.split('\n').filter(row => row.trim() !== '');
        letterRows.forEach(row => {
            const parts = row.split(';');
            if (parts.length >= 5) {
                const [charMaj, charMin, pronunciation, example, type, wordExamplesStr = ''] = parts;
                let examplesHTML = '';
                if (wordExamplesStr) {
                    examplesHTML = wordExamplesStr.split('|').map(ex => {
                        const [word, pron, trans] = ex.split(',');
                        if (!word || !pron || !trans) return '';
                        return \`<div class="word-example"><span class="word">\${escapeHtml(word)}</span> <span class="pronunciation">\${escapeHtml(pron)}</span> <span class="translation">- \${escapeHtml(trans)}</span></div>\`;
                    }).join('');
                }
                const cardClass = type.toLowerCase() === 'identique' ? 'similar' : type.toLowerCase() === 'pi√®ge' ? 'different' : 'unique';
                lettersHTML += \`
<div class="letter-card \${cardClass}" data-letter="\${escapeHtml(charMaj)} \${escapeHtml(charMin)}">
    <span class="letter-type">\${escapeHtml(type)}</span>
    <div class="letter-display"><span>\${escapeHtml(charMaj)}</span><span>\${escapeHtml(charMin)}</span></div>
    <div class="pronunciation">\${escapeHtml(pronunciation)}</div>
    <div class="example">\${escapeHtml(example)}</div>
    \${examplesHTML ? \`<div class="word-examples">\${examplesHTML}</div>\` : ''}
</div>\`;
            }
        });

         const html = \`
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>\${escapeHtml(pageTitle)}</title>
    <style>
        :root { --primary: \${escapeHtml(generalSettings.themePrimary)}; --secondary: \${escapeHtml(generalSettings.themeSecondary)}; --accent: \${escapeHtml(generalSettings.themeAccent)}; --russe: \${escapeHtml(generalSettings.themeRusse)}; --francais: \${escapeHtml(generalSettings.themeFrancais)}; --card-bg: \${escapeHtml(generalSettings.themeCardBg)}; --background: \${escapeHtml(generalSettings.themeBackground)}; --dark: \${escapeHtml(generalSettings.themeDark)}; }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--background); color: var(--dark); }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }
        header { background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; padding: 2rem 0; text-align: center; }
        .nav-buttons { display: flex; justify-content: center; gap: 15px; padding: 15px 0; background:white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 30px;}
        .nav-btn { background: var(--primary); color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; }
        .nav-btn.active { background: var(--secondary); }
        .alphabet-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem; }
        .letter-card { background-color: var(--card-bg); border-radius: 10px; padding: 1.5rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); position: relative; }
        .letter-card.similar { border-left: 4px solid #38a169; } .letter-card.different { border-left: 4px solid #e53e3e; } .letter-card.unique { border-left: 4px solid #d69e2e; }
        .letter-display { font-size: 3rem; font-weight: bold; color: var(--russe); display:flex; justify-content:space-between; }
        .pronunciation { font-style: italic; } .word { color: var(--russe); font-weight:bold; } .translation { color: var(--francais); }
        .letter-type { position: absolute; top: 0.5rem; right: 0.5rem; font-size: 0.8rem; padding: 0.2rem 0.5rem; border-radius: 20px; }
        .similar .letter-type { background-color: #e6f7eb; color: #38a169; } .different .letter-type { background-color: #fee2e2; color: #e53e3e; } .unique .letter-type { background-color: #fef3c7; color: #d97706; }
    </style>
</head>
<body>
    <header><div class="container"><h1>\${escapeHtml(pageTitle)}</h1><p>\${escapeHtml(pageSubtitle)}</p></div></header>
    <nav><div class="nav-buttons">
        <a href="index.html" class="nav-btn">üè† Accueil</a>
        <a href="alphabet.html" class="nav-btn active">üî§ Alphabet</a>
        <a href="vocabulaire.html" class="nav-btn">üìö Vocabulaire</a>
        <a href="cours-21-jours.html" class="nav-btn">üìÖ Programme 21 jours</a>
    </div></nav>
    <main class="container"><h2>L'alphabet complet</h2><div class="alphabet-grid">\${lettersHTML}</div></main>
</body></html>\`;
        downloadFile('alphabet.html', html);
    }

    function generateVocabularyHTML() {
        const generalSettings = getGeneralSettings();
        const pageTitle = document.getElementById('vocabPageTitle').value;
        const categoriesData = document.getElementById('vocabCategories').value;
        const wordsData = document.getElementById('wordsData').value;

        let categoryFiltersHTML = '<button class="category-filter active" data-category="all">Tous</button>';
        const categories = categoriesData.split('\n').map(line => {
            const parts = line.split(','); return { id: parts[0]?.trim(), name: parts[1]?.trim() };
        }).filter(cat => cat.id && cat.name);
        categories.forEach(cat => { categoryFiltersHTML += \`<button class="category-filter" data-category="\${escapeHtml(cat.id)}">\${escapeHtml(cat.name)}</button>\`; });
        
        const vocabularyArray = wordsData.split('\n').filter(row => row.trim() !== '').map(row => {
            const parts = row.split(';');
            return { russian: parts[0]?.trim() || '', pronunciation: parts[1]?.trim() || '', translation: parts[2]?.trim() || '', categories: parts[3] ? parts[3].split(',').map(c => c.trim()) : ['basics'], nuance: parts[4]?.trim() || '' };
        });

        const html = \`
<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>\${escapeHtml(pageTitle)}</title>
<style>
    :root { --primary: \${escapeHtml(generalSettings.themePrimary)}; --secondary: \${escapeHtml(generalSettings.themeSecondary)}; --accent: \${escapeHtml(generalSettings.themeAccent)}; --russe: \${escapeHtml(generalSettings.themeRusse)}; --francais: \${escapeHtml(generalSettings.themeFrancais)}; --card-bg: \${escapeHtml(generalSettings.themeCardBg)}; --background: \${escapeHtml(generalSettings.themeBackground)}; --dark: \${escapeHtml(generalSettings.themeDark)}; }
    body { font-family: 'Segoe UI', sans-serif; background-color: var(--background); color: var(--dark); }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    header { background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; padding: 30px 0; text-align: center; }
    .nav-buttons { display: flex; justify-content: center; gap: 15px; padding: 15px 0; background:white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 30px;}
    .nav-btn { background: var(--primary); color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; }
    .nav-btn.active { background: var(--secondary); }
    .category-filters { display:flex; flex-wrap:wrap; gap:10px; margin-bottom:20px; justify-content:center; }
    .category-filter { padding:8px 16px; border:1px solid #ccc; border-radius:20px; cursor:pointer; }
    .category-filter.active { background:var(--primary); color:white; border-color:var(--primary); }
    .vocab-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
    .vocab-card { background: var(--card-bg); padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .russian-word { font-size: 1.8rem; color: var(--russe); font-weight: 700; }
    .pronunciation { font-style: italic; } .translation { font-size: 1.3rem; color: var(--francais); }
</style>
</head>
<body>
<header><div class="container"><h1>\${escapeHtml(pageTitle)}</h1></div></header>
<nav><div class="nav-buttons">
    <a href="index.html" class="nav-btn">üè† Accueil</a><a href="alphabet.html" class="nav-btn">üî§ Alphabet</a><a href="vocabulaire.html" class="nav-btn active">üìö Vocabulaire</a><a href="cours-21-jours.html" class="nav-btn">üìÖ Programme 21 jours</a>
</div></nav>
<main class="container">
    <div class="category-filters">\${categoryFiltersHTML}</div>
    <div class="vocab-container" id="vocab-container"></div>
</main>
<script>
    const vocabulary = \${JSON.stringify(vocabularyArray)};
    function displayWords(filter = 'all') {
        const container = document.getElementById('vocab-container'); container.innerHTML = '';
        const wordsToDisplay = filter === 'all' ? vocabulary : vocabulary.filter(w => w.categories.includes(filter));
        wordsToDisplay.forEach(word => {
            const card = document.createElement('div'); card.className = 'vocab-card';
            card.innerHTML = \\\`<div class="russian-word">\\\${word.russian}</div><div class="pronunciation">\\\${word.pronunciation}</div><div class="translation">\\\${word.translation}</div>\\\${word.nuance ? \\\`<p style="margin-top:10px;font-size:0.9em;color:#555;"><em>Nuance: \\\${word.nuance}</em></p>\` : ''}\\\`;
            container.appendChild(card);
        });
    }
    document.querySelectorAll('.category-filter').forEach(button => {
        button.addEventListener('click', () => {
            document.querySelectorAll('.category-filter').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            displayWords(button.dataset.category);
        });
    });
    displayWords();
</script>
</body></html>\`;
        downloadFile('vocabulaire.html', html);
    }
    
    function generateCourseHTML() {
        const generalSettings = getGeneralSettings();
        const pageTitle = document.getElementById('coursePageTitle').value;
        const daysDataRaw = document.getElementById('daysData').value;
        const daysBlocks = daysDataRaw.split('__DAY_SEPARATOR__');

        let dayContentsHTML = ''; let sidebarDays = { 1: [], 2: [], 3: [] };
        daysBlocks.forEach(dayBlock => {
            const lines = dayBlock.trim().split('\n'); if (lines.length < 1) return;
            const headerLine = lines.shift(); const [dayNum, dayTitle, dayObjective] = headerLine.split(';');
            if (!dayNum || !dayTitle || !dayObjective) return;
            const weekNum = Math.ceil(parseInt(dayNum) / 7);
            if (sidebarDays[weekNum]) { sidebarDays[weekNum].push({day: dayNum, title: dayTitle}); }

            dayContentsHTML += \`<div id="jour\${escapeHtml(dayNum)}" class="tab-content"><div class="card"><div class="card-header"><h2>Jour \${escapeHtml(dayNum)}: \${escapeHtml(dayTitle)}</h2></div><div class="card-body">\`;
            dayContentsHTML += \`<div class="section"><h3 class="section-title">Objectif du jour</h3><p>\${escapeHtml(dayObjective)}</p></div>\`;
            lines.forEach(sectionLine => {
                 const [typeAndTitle, ...dataParts] = sectionLine.split('|'); const [type, title] = typeAndTitle.split(':'); const contentData = dataParts.join('|').trim();
                 dayContentsHTML += \`<div class="section"><h3 class="section-title">\${escapeHtml(title || '')}</h3>\`;
                 switch(type.trim().toUpperCase()) {
                     case 'TEXT_SECTION': dayContentsHTML += \`<p>\${escapeHtml(contentData)}</p>\`; break;
                     case 'LETTER_GRID': const letters = contentData.split('|').map(l=>l.split(',')); dayContentsHTML += \`<div class="letter-grid">\`; letters.forEach(l => { if(l.length >= 3) dayContentsHTML += \`<div class="letter-item"><div class="cyrillic"><span>\${escapeHtml(l[0])}</span><span>\${escapeHtml(l[1])}</span></div><div class="pronunciation">\${escapeHtml(l[2])}</div>\${l[3]?\`<div class="example">\${escapeHtml(l[3])}</div>\`:''}</div>\`; }); dayContentsHTML += \`</div>\`; break;
                     case 'VOCAB_LIST': const vocabs = contentData.split('|').map(v=>v.split(',')); dayContentsHTML += \`<div class="vocab-list">\`; vocabs.forEach(v => { if(v.length >= 3) dayContentsHTML += \`<div class="vocab-item"><div><div class="term">\${escapeHtml(v[0])}</div><div class="pronunciation">\${escapeHtml(v[1])}</div></div><div class="translation">\${escapeHtml(v[2])}</div></div>\`; }); dayContentsHTML += \`</div>\`; break;
                     case 'EXERCISE': dayContentsHTML += \`<div class="exercise"><div class="exercise-title">\${escapeHtml(title)}</div><p>\${escapeHtml(contentData)}</p></div>\`; break;
                     case 'FOCUS_BOX': case 'NOTE_BOX': dayContentsHTML += \`<div class="note-box"><div class="note-title">\${escapeHtml(title)}</div><p>\${escapeHtml(contentData).replace(/\\n/g, '<br>')}</p></div>\`; break;
                     case 'RECAP_LIST': const items = contentData.split('|'); dayContentsHTML += \`<div class="recap-list"><ul>\`; items.forEach(item => dayContentsHTML += \`<li>\${escapeHtml(item)}</li>\`); dayContentsHTML += \`</ul></div>\`; break;
                     case 'DIALOGUE': const Dlines = contentData.split('|'); dayContentsHTML += \`<div class="dialogue-box">\`; Dlines.forEach(line => {const [speaker, text] = line.split(':'); dayContentsHTML += \`<div class="dialogue-line"><span class="speaker">\${escapeHtml(speaker)}:</span> <span class="russian">\${escapeHtml(text)}</span></div>\`; }); dayContentsHTML += \`</div>\`; break;
                 }
                 dayContentsHTML += \`</div>\`;
            });
            dayContentsHTML += \`</div></div></div>\`;
        });

        let sidebarHTML = '';
        for (let i = 1; i <= 3; i++) {
            sidebarHTML += \`<div class="sidebar-week-item"><h4>Semaine \${i}</h4><ul class="sidebar-day-list">\`;
            sidebarDays[i].forEach(day => { sidebarHTML += \`<li><a href="#jour\${day.day}" onclick="openTab('jour\${day.day}')">\${day.title}</a></li>\`; });
            sidebarHTML += \`</ul></div>\`;
        }
        
        const html = \`<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>\${escapeHtml(pageTitle)}</title>
<style>
    :root { --primary: \${escapeHtml(generalSettings.themePrimary)}; --secondary: \${escapeHtml(generalSettings.themeSecondary)}; --accent: \${escapeHtml(generalSettings.themeAccent)}; --russe: \${escapeHtml(generalSettings.themeRusse)}; --francais: \${escapeHtml(generalSettings.themeFrancais)}; --background: \${escapeHtml(generalSettings.themeBackground)}; --dark: \${escapeHtml(generalSettings.themeDark)}; --card-bg: white; --text-primary: var(--dark); --border-color: #e2e8f0; --success: #38a169; --warning: #d69e2e; --info: #3182ce; }
    body { font-family: 'Segoe UI', sans-serif; background-color: var(--background); color: var(--text-primary); }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    header { background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; padding: 30px 0; text-align: center; }
    .nav-buttons { display: flex; justify-content: center; gap: 15px; padding: 15px 0; background:white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 30px;}
    .nav-btn { background: var(--primary); color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; }
    .nav-btn.active { background: var(--secondary); }
    .content-wrapper { display: flex; gap:30px; } .sidebar-nav { width: 250px; flex-shrink: 0; } .main-content { flex-grow: 1; }
    .card { background: var(--card-bg); padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 30px; }
    .card-header { padding-bottom: 15px; margin-bottom: 20px; border-bottom: 1px solid var(--border-color); }
    .card-header h2 { font-size: 1.5rem; color: var(--primary); }
    .section { margin-bottom: 25px; } .section-title { font-size: 1.25rem; color: var(--primary); margin-bottom: 15px; padding-bottom: 8px; border-bottom: 2px solid var(--accent); }
    .tab-content { display: none; } .tab-content.active { display: block; }
    .vocab-list, .letter-grid { display: grid; gap: 15px; } .vocab-list { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); } .letter-grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); }
    .vocab-item, .letter-item { padding: 15px; border-radius: 8px; border-left: 4px solid var(--accent); background: #f8f9fa; }
    .term, .cyrillic {font-weight:bold; color: var(--russe);} .translation {color: var(--francais);}
    .exercise { background: #fffbeb; border-left: 4px solid var(--warning); padding:15px; border-radius:8px;} .exercise-title {font-weight:bold; color:var(--warning);}
    .note-box { background: #eef2ff; border-left: 4px solid var(--info); padding:15px; border-radius:8px;} .note-title {font-weight:bold; color:var(--info);}
    .recap-list { background: #f0fdf4; border-left: 4px solid var(--success); padding:15px; border-radius:8px;} .recap-list ul {margin-left:20px;}
    .dialogue-box { background: #f8fafc; border:1px solid #e2e8f0; padding:15px; border-radius:8px;} .speaker {font-weight:bold;} .russian{color:var(--russe);}
</style>
</head>
<body>
<header><div class="container"><h1>\${escapeHtml(pageTitle)}</h1></div></header>
<nav><div class="nav-buttons">
    <a href="index.html" class="nav-btn">üè† Accueil</a><a href="alphabet.html" class="nav-btn">üî§ Alphabet</a><a href="vocabulaire.html" class="nav-btn">üìö Vocabulaire</a><a href="cours-21-jours.html" class="nav-btn active">üìÖ Programme 21 jours</a>
</div></nav>
<div class="container content-wrapper">
    <nav class="sidebar-nav">\${sidebarHTML}</nav>
    <main class="main-content">\${dayContentsHTML}</main>
</div>
<script>
    function openTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(tab => tab.style.display = 'none');
        document.getElementById(tabId).style.display = 'block';
        window.location.hash = tabId; // Update URL hash for better navigation
    }
    // Check for hash on load to open the correct tab
    document.addEventListener('DOMContentLoaded', () => {
        if(window.location.hash) {
            openTab(window.location.hash.substring(1));
        } else {
            openTab('jour1');
        }
    });
</script>
</body></html>\`;
        downloadFile('cours-21-jours.html', html);
    }
</script>

</body>
</html>
```</immersive>
